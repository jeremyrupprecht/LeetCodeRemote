# 36. Valid Sudoku
# https://leetcode.com/problems/valid-sudoku/

def isValidSudoku(board):
    squareDict = {}
    for i in range(len(board)):
        rowSet = set()
        colSet = set()
        for o in range(len(board[i])):
            transposeX = (o // 3)
            transposeY = (i // 3)
            squareKey = (transposeY, transposeX)
            if (board[i][o] in rowSet or
                board[o][i] in colSet or 
                squareKey in squareDict and board[i][o] in squareDict[squareKey]):
                    return False
            if (board[i][o]) != '.':
                rowSet.add(board[i][o])
                if squareKey in squareDict:
                    squareDict[squareKey].add(board[i][o])
                else:
                    squareDict[squareKey] = {board[i][o]}
            if (board[o][i] != '.'):
                colSet.add(board[o][i])
    return True
            
if __name__ == "__main__":

    board = [["5","3",".",".","7",".",".",".","."]
            ,["6",".",".","1","9","5",".",".","."]
            ,[".","9","8",".",".",".",".","6","."]
            ,["8",".",".",".","6",".",".",".","3"]
            ,["4",".",".","8",".","3",".",".","1"]
            ,["7",".",".",".","2",".",".",".","6"]
            ,[".","6",".",".",".",".","2","8","."]
            ,[".",".",".","4","1","9",".",".","5"]
            ,[".",".",".",".","8",".",".","7","9"]]
    
    board2 = [["8","3",".",".","7",".",".",".","."]
            ,["6",".",".","1","9","5",".",".","."]
            ,[".","9","8",".",".",".",".","6","."]
            ,["8",".",".",".","6",".",".",".","3"]
            ,["4",".",".","8",".","3",".",".","1"]
            ,["7",".",".",".","2",".",".",".","6"]
            ,[".","6",".",".",".",".","2","8","."]
            ,[".",".",".","4","1","9",".",".","5"]
            ,[".",".",".",".","8",".",".","7","9"]]
    
    board3 = [[".",".",".",".","5",".", ".","1","."]
             ,[".","4",".","3",".",".", ".",".","."]
             ,[".",".",".",".",".","3", ".",".","1"]

             ,["8",".",".",".",".",".",".","2","."]
             ,[".",".","2",".","7",".",".",".","."]
             ,[".","1","5",".",".",".",".",".","."]
             ,[".",".",".",".",".","2",".",".","."]
             ,[".","2",".","9",".",".",".",".","."]
             ,[".",".","4",".",".",".",".",".","."]]

    print(isValidSudoku(board3))